unlink("~/College/Rdocs/Cognitive_Vectors_cache", recursive = TRUE)
wd()
printwd()
setwd("~/GitHub/NNDb-vectors")
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
library(dplyr)
library(tidyr)
library(data.table)
FinalScoresDF1 <- read.csv("~/NIH_Data/NIH_assessment_scores.csv", quote = "")
FinalScoresDF1 <- data.frame(apply(FinalScoresDF1, 2, function(x) gsub("^$|^ $", NA, x)))
FinalScoresDF1 <- FinalScoresDF1[is.na(FinalScoresDF1$RawScore) == FALSE, ]
FinalScoresDF1$DeviceID <- NULL
FinalScoresDF1$DateFinished <- NULL
FinalScoresDF1$Language <- NULL
FinalScoresDF1$Raw.Score.Right.Ear <- NULL
FinalScoresDF1$Threshold.Right.Ear <- NULL
FinalScoresDF1$Raw.Score.Left.Ear <- NULL
FinalScoresDF1$Threshold.Left.Ear <- NULL
FinalScoresDF1 <- FinalScoresDF1 %>% replace(is.na(.), 0)
NamesFinal <- c("NIH Toolbox Emotional Support FF Age 18+ v2.0", "NIH Toolbox Instrumental Support FF Age 18+ v2.0", "NIH Toolbox Friendship FF Age 18+ v2.0", "NIH Toolbox Loneliness FF Age 18+ v2.0", "NIH Toolbox Perceived Rejection FF Age 18+ v2.0", "NIH Toolbox Perceived Hostility FF Age 18+ v2.0", "NIH Toolbox Anger-Hostility FF Age 18+ v2.0", "NIH Toolbox Positive Affect CAT Age 18+ v2.0", "NIH Toolbox General Life Satisfaction CAT Age 18+ v2.0", "NIH Toolbox Meaning and Purpose CAT Age 18+ v2.0", "NIH Toolbox Self-Efficacy CAT Age 18+ v2.0", "NIH Toolbox Perceived Stress FF Age 18+ v2.0", "NIH Toolbox Fear-Affect CAT Age 18+ v2.0", "NIH Toolbox Fear-Somatic Arousal FF Age 18+ v2.0", "NIH Toolbox Sadness CAT Age 18+ v2.0", "NIH Toolbox Anger-Affect CAT Age 18+ v2.0", "NIH Toolbox Anger-Physical Aggression FF Age 18+ v2.0", "NIH Toolbox Dimensional Change Card Sort Test Age 12+ v2.1", "NIH Toolbox Flanker Inhibitory Control and Attention Test Age 12+ v2.1")
FinalScoresDF1 <- FinalScoresDF1[FinalScoresDF1$Inst %in% NamesFinal, ]
FinalScoresDF1 <- FinalScoresDF1[order(FinalScoresDF1$Inst), ]
FinalScoresDF1 <- FinalScoresDF1 %>% arrange(Inst)
FinalScoresDF1 <- FinalScoresDF1 %>% arrange(Subject.ID)
FinalScoresDF_wide <- FinalScoresDF1 %>%
group_by(Subject.ID) %>%
mutate(nm1 = rowid(Subject.ID)) %>%
pivot_wider(names_from = nm1, names_sort = TRUE, values_from = c(names(FinalScoresDF1))[2:17])
FinalScoresDF_wide <- cbind(FinalScoresDF_wide[1], FinalScoresDF_wide[-1][order(as.numeric(regmatches(names(FinalScoresDF_wide)[-1], regexpr("\\d+", names(FinalScoresDF_wide)[-1]))))])
load("C:/Users/savan/OneDrive/Documents/GitHub/NNDb-vectors/.RData")
